let allProducts=[],totalItems=0,totalPrice=0;function getCart(){return JSON.parse(localStorage.getItem("cart"))||[]}function saveCart(t){localStorage.setItem("cart",JSON.stringify(t))}function printProducts(t){const e=document.querySelector(".products-box");e&&(e.innerHTML="",t.forEach(t=>{let a=Number(t.price).toFixed(2).replace(".",",");e.innerHTML+=`\n      <li >  \n        <i class='fi-tc-plus' title='Adicionar ao Carrinho' onclick='addToCart(${t.id})'></i>\n        <figure>\n          <img src='${t.img}' alt='${t.name}' loading="lazy">\n        </figure>\n        <div>\n          <h3>${t.name}</h3>\n          <h6><em>R$</em> ${a}</h6>\n        </div>  \n      </li>\n    `}))}function addToCart(t){const e=allProducts.find(e=>e.id===t);if(!e)return;let a=getCart(),n=a.find(e=>e.id===t);n?n.quantity++:a.push({id:e.id,name:e.name,img:e.img,price:Number(e.price),quantity:1}),saveCart(a),updateCartSummary(),document.querySelector(".cart-box")&&loadCart();let r=document.querySelector(".message-info-product");r.style.display="flex",setTimeout(()=>{r.style.display="none"},1500)}function loadCart(){const t=document.querySelector(".cart-box");if(!t)return;let e=getCart();if(t.innerHTML="",0===e.length)return t.innerHTML="<p class='cart-no-products'>Adicione produtos ao seu carrinho. <a href='catalogo.html'>Conferir Produtos</a></p>",void updateCartSummary();e.forEach((e,a)=>{let n=(e.price*e.quantity).toFixed(2).replace(".",",");t.innerHTML+=`\n      <li class="cart-item">\n        <figure>\n          <img src="${e.img}" alt="${e.name}" loading="lazy">\n        </figure>\n\n        <div class='infor-product-cart'>\n          <h3>${e.name}</h3>\n          <button onclick="deleteItem(${a})">Excluir</button>\n        </div>\n\n        <div class="controls">\n          <button onclick="updateQuantity(${e.id}, 'remove')">-</button>\n          <span>${e.quantity}</span>\n          <button onclick="updateQuantity(${e.id}, 'add')">+</button>\n        </div>\n\n        <h6><em>R$ </em>${n}</h6>\n      </li>\n    `}),updateCartSummary()}function filterMainCategory(t){let e=allProducts;"Maquiagem"===t&&(e=allProducts.filter(t=>"Acess√≥rios"!==t.category)),"Acess√≥rios"===t&&(e=allProducts.filter(t=>"Acess√≥rios"===t.category)),printProducts(e)}function updateQuantity(t,e){let a=getCart(),n=a.find(e=>e.id===t);n&&("add"===e?n.quantity++:"remove"===e&&n.quantity>1&&n.quantity--,saveCart(a),loadCart(),updateCartSummary())}function deleteItem(t){let e=getCart();e.splice(t,1),saveCart(e),loadCart(),updateCartSummary();let a=document.querySelector(".message-delete");a.style.display="flex",setTimeout(()=>{a.style.display="none"},1500)}function calculateSummary(){let t=getCart();totalItems=t.reduce((t,e)=>t+e.quantity,0),totalPrice=t.reduce((t,e)=>t+e.quantity*e.price,0)}function updateCartSummary(){calculateSummary(),document.querySelectorAll("[data-cart-count]").forEach(t=>{t.textContent=totalItems,t.style.display=totalItems>0?"inline-flex":"none"});const t=document.querySelector(".summary-box");t&&(t.innerHTML=0!==totalItems?`\n    <p>Produtos (<span data-cart-count>${totalItems}</span>)</p>\n    <h3>Total:  <span data-cart-total>R$ ${totalPrice.toFixed(2).replace(".",",")}</span></h3>\n\n    <div class='info-delivery'>\n      <p>Entregas em √Åguas Lindas e no DF aos finais de semana.\nFrete gr√°tis a partir de R$ 19,99</p>\n      <input type="text" placeholder="Adicionar Endere√ßo" class="input-addres" />\n    </div>\n\n    <button class="btn" onclick="orderCompleted()">Finalizar Compra</button>\n  `:'\n      <p data-cart-message style="font-size:14px; opacity:.7;">\n        Aqui voc√™ encontrar√° os valores da sua compra assim que adicionar produtos.\n      </p>\n    ')}document.querySelectorAll("[data-main-category]").forEach(t=>{t.addEventListener("click",()=>{document.querySelectorAll("[data-main-category]").forEach(t=>t.classList.remove("active")),t.classList.add("active"),filterMainCategory(t.getAttribute("data-main-category"))})}),updateCartSummary(),fetch("assets/js/catalog.json").then(t=>t.json()).then(t=>{allProducts=t,document.querySelector(".products-box")&&(document.getElementById("signup")?printProducts(allProducts.slice(0,8)):printProducts(allProducts)),document.querySelector(".cart-box")&&loadCart(),updateCartSummary()}),filterMainCategory("Todos");const searchInput=document.getElementById("search");function orderCompleted(){let t=document.querySelector(".input-addres").value;if(""===t.trim()){let t=document.querySelector(".message-warning-final");return t.style.display="flex",void setTimeout(()=>{t.style.display="none"},2e3)}let e=JSON.parse(localStorage.getItem("cart"))||[];if(0===e.length)return void alert("Seu carrinho est√° vazio!");let a="*üõí NOVO PEDIDO REALIZADO*\n\n";a+="*üìç Endere√ßo de entrega:* "+t+"\n\n",a+="*Itens do pedido:*\n";let n=0;e.forEach(t=>{let e=t.price*t.quantity;n+=e,a+=`\n‚Ä¢ *${t.name}*\n`,a+=`Qtd: ${t.quantity}\n`,a+=`Pre√ßo: R$ ${t.price.toFixed(2)}\n`,a+=`Subtotal: R$ ${e.toFixed(2)}\n`}),a+="\n----------------------\n",a+=`*TOTAL GERAL: R$ ${n.toFixed(2)}*\n`,a+="----------------------\n\n",a+="*Aguardo confirma√ß√£o do pedido!*";let r=encodeURIComponent(a);window.open(`https://wa.me/556195075423?text=${r}`,"_blank"),localStorage.removeItem("cart")}searchInput&&searchInput.addEventListener("input",()=>{let t=searchInput.value.toLowerCase(),e=document.querySelector(".no-product"),a=allProducts.filter(e=>e.name.toLowerCase().includes(t));if(0===a.length)return document.querySelector(".products-box").innerHTML="",e.style.display="flex",void(e.querySelector("em").innerHTML=searchInput.value);e.style.display="none",printProducts(a)}),window.addToCart=addToCart,window.updateQuantity=updateQuantity,window.deleteItem=deleteItem,window.addEventListener("storage",t=>{"cart"===t.key&&(loadCart(),updateCartSummary())}),document.addEventListener("DOMContentLoaded",()=>{updateCartSummary(),document.querySelector(".cart-box")&&loadCart()});